---
## Front matter
lang: ru-RU
title: Лабораторная работа №1
subtitle: Операционные системы
author:
  - Карпова А. А.
institute:
  - Российский университет дружбы народов, Москва, Россия
  - Объединённый институт ядерных исследований, Дубна, Россия
date: 02 марта 2024

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'

## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9

---

# Цель работы

Изучить идеологию и применение средств контроля версий. 
Освоить умения по работе с git.

# Задание

1. Установка ПО
2. Базовая настройка git
3. Создание ключей ssh
4. Создание ключей pgp
5. Добавление ключа PGP на гитхаб
6. Настройка автоматических подписей коммитов git
7. Настройка gh
8. Шаблон для рабочего пространства
9. Ответы на контрольные вопросы

## Выполнение лабораторной работы. Установка ПО
 
Устанавливаю гит с помощью dnf install git

Устанавливаю gh с помощью dnf install gh

## Выполнение лабораторной работы. Базовая настройка git

Задаю имя и email владельца репозитория с помощью git config --global user.name "Name Surname" и git config --global user.email "work@mail"

Настраиваю utf-8 в выводе сообщений git с помощью git config --global core.quotepath false

Задаю имя начальной ветки с помощью git config --global init.defaultBranch master

Параметр autocrlf с помощью git config --global core.autocrlf input
Параметр safecrlf с помощью git config --global core.safecrlf warn

## Выполнение лабораторной работы. Создание ключей ssh

Создаю ssh ключ по алгоритму rsa с ключём размером 4096 бит:

ssh-keygen -t rsa -b 4096

по алгоритму ed25519:

ssh-keygen -t ed25519

## Выполнение лабораторной работы. Создание ключей pgp

Генерирую ключ

gpg --full-generate-key


Из предложенных опций выбираю:

    тип RSA and RSA;
    размер 4096;
    выберите срок действия; значение по умолчанию — 0 (срок действия не истекает никогда).

GPG запросит личную информацию, которая сохранится в ключе:

    Имя (не менее 5 символов).
    Адрес электронной почты.
        При вводе email убеждаюсь, что он соответствует адресу, используемому на GitHub.
    Комментарий. Можно ввести что угодно или нажать клавишу ввода, чтобы оставить это поле пустым.
    
## Выполнение лабораторной работы. Добавление PGP ключа в GitHub

Вывожу список ключей и копируем отпечаток приватного ключа:

gpg --list-secret-keys --keyid-format LONG

Отпечаток ключа — это последовательность байтов, используемая для идентификации более длинного, по сравнению с самим отпечатком ключа.

Копирую мой сгенерированный PGP ключ в буфер обмена:

gpg --armor --export <PGP Fingerprint> | xclip -sel clip

Перехожу в настройки GitHub (https://github.com/settings/keys), нажимаю на кнопку New GPG key и вставляю полученный ключ в поле ввода.

## Выполнение лабораторной работы. Настройка автоматических подписей коммитов git

Используя введёный email, указываю Git применять его при подписи коммитов:

  git config --global user.signingkey <PGP Fingerprint>
  git config --global commit.gpgsign true
  git config --global gpg.program $(which gpg2)
  
## Выполнение лабораторной работы. Настройка gh

Для начала необходимо авторизоваться

gh auth login

Утилита задаст несколько наводящих вопросов.
Авторизоваться можно через браузер.

## Выполнение лабораторной работы. Сознание репозитория курса на основе шаблона

Необходимо создать шаблон рабочего пространства. 

Например, для 2022–2023 учебного года и предмета «Операционные системы» (код предмета os-intro) создание репозитория примет следующий вид:

mkdir -p ~/work/study/2022-2023/"Операционные системы"
cd ~/work/study/2022-2023/"Операционные системы"
gh repo create study_2022-2023_os-intro --template=yamadharma/course-directory-student-template --public
git clone --recursive git@github.com:<owner>/study_2022-2023_os-intro.git os-intro

## Выполнение лабораторной работы. Настройка каталога курса

Перехожу в каталог курса:

cd ~/work/study/2022-2023/"Операционные системы"/os-intro

Удаляю лишние файлы:

rm package.json

Создаю необходимые каталоги:

echo os-intro > COURSE
make prepare

Отправляю файлы на сервер:

git add .
git commit -am 'feat(main): make course structure'
git push

## Выполнение лабораторной работы. Ответы на котрольные вопросы

Что такое системы контроля версий (VCS) и для решения каких задач они предназначаются? - Система контроля версий 
(Version Control System, VCS) представляет собой программное обеспечение, которое позволяет отслеживать изменения 
в документах, при необходимости производить их откат, определять, кто и когда внес исправления и т. п

Хранилище -- репозиторий, хранилище версий, в нем хранятся все документы, включая историю их изменения и прочей 
служебной информацией. commit -- отслеживание изменений, сохраняет разницу в изменениях. История -- хранит все 
изменения в проекте и позволяет при необходимости вернуться/обратиться к нужным данным. Рабочая копия -- 
копия проекта, основанная на версии из хранилища, чаще всего последней версии.

## Выполнение лабораторной работы. Ответы на котрольные вопросы

Централизованные VCS (например: CVS, TFS, AccuRev) -- одно основное хранилище всего проекта. Каждый пользователь 
копирует себе необходимые ему файлы из этого репозитория, изменяет, затем добавляет изменения обратно в хранилище. 
Децентрализованные VCS (например: Git, Bazaar) -- у каждого пользователя свой вариант репозитория (возможно несколько вариантов), 
есть возможность добавлять и забирать изменения из любого репозитория. В отличие от классических, в распределенных 
(децентралиованных) системах контроля версий центральный репозиторий не является обязательным.

Сначала создается и подключается удаленный репозиторий, затем по мере изменения проекта эти изменения отправляются на сервер.

Участник проекта перед началом работы получает нужную ему версию проекта в хранилище, с помощью определенных команд, после внесения изменений пользователь размещает новую версию в хранилище. При этом предыдущие версии не удаляются. К ним можно вернуться в любой момент.

## Выполнение лабораторной работы. Ответы на котрольные вопросы

Хранение информации о всех изменениях в вашем коде, обеспечение удобства командной работы над кодом.

Создание основного дерева репозитория: git init

Получение обновлений (изменений) текущего дерева из центрального репозитория: git pull

Отправка всех произведённых изменений локального дерева в центральный репозиторий: git push

Просмотр списка изменённых файлов в текущей директории: git status

Просмотр текущих изменений: git diff

## Выполнение лабораторной работы. Ответы на котрольные вопросы

Сохранение текущих изменений: добавить все изменённые и/или созданные файлы и/или каталоги: git add .

добавить конкретные изменённые и/или созданные файлы и/или каталоги: git add имена_файлов

удалить файл и/или каталог из индекса репозитория (при этом файл и/или каталог остаётся в локальной директории): 
git rm имена_файлов

## Выполнение лабораторной работы. Ответы на котрольные вопросы

Сохранение добавленных изменений:

сохранить все добавленные изменения и все изменённые файлы: git commit -am 'Описание коммита'

сохранить добавленные изменения с внесением комментария через встроенный редактор: git commit

создание новой ветки, базирующейся на текущей: git checkout -b имя_ветки

переключение на некоторую ветку: git checkout имя_ветки (при переключении на ветку, которой ещё нет в локальном 
репозитории, она будет создана и связана с удалённой)

отправка изменений конкретной ветки в центральный репозиторий: git push origin имя_ветки

слияние ветки с текущим деревом: git merge --no-ff имя_ветки

## Выполнение лабораторной работы. Ответы на котрольные вопросы

Удаление ветки:

удаление локальной уже слитой с основным деревом ветки: git branch -d имя_ветки

принудительное удаление локальной ветки: git branch -D имя_ветки

удаление ветки с центрального репозитория: git push origin :имя_ветки

git push -all отправляем из локального репозитория все сохраненные изменения в центральный репозиторий, 
предварительно создав локальный репозиторий и сделав предварительную конфигурацию.

## Выполнение лабораторной работы. Ответы на котрольные вопросы

Ветвление - один из параллельных участков в одном хранилище, исходящих из одной версии, обычно есть главная ветка. 
Между ветками, т. е. их концами возможно их слияние. Используются для разработки новых функций.

Во время работы над проектом могут создаваться файлы, которые не следуют добавлять в репозиторий. Например, временные файлы. 
Можно прописать шаблоны игнорируемых при добавлении в репозиторий типов файлов в файл .gitignore с помощью сервисов


# Выводы

В ходе этой работы я изучитла идеологию и применение средств контроля версий. 
Освоила умения по работе с git.

# Список литературы{.unnumbered}

Лабораторная работа № 2 [Электронный ресурс] URL: https://esystem.rudn.ru/mod/page/view.php?id=970819

::: {#refs}
:::
